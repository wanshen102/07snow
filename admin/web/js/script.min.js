/*! vip6.0-loginPage 201412251138 */
$(function(){function e(){return!0}function o(e,o){L.oFlash.setFlashCookie(e,o)}function t(e){L.oFlash.deleFlashCookie(e)}function i(){L.oFlash=document.getElementById("fenceCookie"),L.flashIsReady=!0,a()}function a(){var e=L.oFlash.getFlashCookie("antifake");if(e){var o=document.getElementById("pervent").getElementsByTagName("img")[0];o.onload=function(){$("#pervent").click(function(){window.open("http://my."+n.sFenceDomain+"/card/fw/fence.mx")}),$("#pervent").show()},o.onerror=function(){$("#pervent").hide()},o.src=e}else $("#pervent").hide()}var n={sDomain:"vip.163.com",sFenceDomain:"vip.163.com",sHttpUrl:"http://reg.163.com/logins.jsp",sHttpsUrl:"https://reg.163.com/logins.jsp",sLoginIframeUrl:"http://vip.163.com/login_frame.html",sPhoneIframeUrl:"http://vip.163.com/login_frame_phone.html",sEnterMailUrl:"http://reg.vip.163.com/enterMail.m?",sProduct:"mailvip"},r=[{type:"-1",lang:"-1",name:"默认风格"},{type:"7",lang:"0",name:"极致6.0"},{type:"5",lang:"0",name:"管家5.0"},{type:"98",lang:"0",name:"智惠版"},{type:"3",lang:"0",name:"简约3.0"},{type:"1",lang:"1",name:"English"}],s=document.forms.loginForm,l=$("#username"),c=$("#realusername"),m=$("#password"),p=$("#replaceun"),h=$("#replacepw"),d=$("#ssl"),u=$("#secure"),g=$("#logintype"),f=$("#language"),v=$("#verbox");$("#verline");var w=$("#seltver"),k=$(".ver"),b=$("#loginbtn");$(".domain");var S=$("#mailbox");$("#regbtn"),$("#paybtn"),$(".curtname");var y=$("#icossl");$("#reglink"),$("#frameforlogin"),$(".m-popup");var I=$(".m-popup-card"),C=$(".m-popup-service"),E="",x="",M="",T="";new Image;var _="";$("#pagebody").hasClass("p-login-vipmail"),$(".m-loginbox"),$(".m-bgwrap");var L={oFlash:"",pageReady:!1,flashIsReady:!1};(function(){if(document.all)var e='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="1" height="1"  id="fenceCookie" name="fenceCookie" align="middle" ><param name="allowScriptAccess" value="always" /><param name="wmode" value="transparent"><param name="FlashVars" value="apiHost='+location.host+'&API_COOKIENAME=vipmail_flashcookie" />'+'<param name="movie" value="http://mimg.vip.163.com/flash/global/AntiFake.swf" />'+'<param name="quality" value="high" />'+"</object>";else var e='<embed src="http://mimg.vip.163.com/flash/global/AntiFake.swf" wmode="transparent" FlashVars="apiHost='+location.host+'&API_COOKIENAME=vipmail_flashcookie" id="fenceCookie" name="fenceCookie" swLiveConnect=true quality="high" width="1" height="1" align="middle" allowScriptAccess="always"  type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';var o=document,t=document.createElement("div");t.id="flashArea",t.innerHTML=e,o.body.appendChild(t)})(),window.isPageReady=e,window.setFlashCookie=o,window.deleFlashCookie=t,window.sCookieSwfIsReady=i,base={fGetCookie:function(e){var o,t,i=e+"=";return document.cookie.length>0?(o=document.cookie.indexOf(i),-1!=o?(o+=i.length,t=document.cookie.indexOf(";",o),-1==t&&(t=document.cookie.length),unescape(document.cookie.substring(o,t))):""):void 0},fSetCookie:function(e,o,t,i){var a=";domain="+(i||n.sDomain);document.cookie=e+"="+escape(o)+a+(t?";expires="+new Date(2099,12,31).toGMTString():"")},fGetQuery:function(e,o){var t=window.location.search.substr(1),i=t.match(RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return o?null==i?null:i[2]:null==i?null:unescape(i[2])},fGetHash:function(e){for(var o=location.hash.replace("#","").split(","),t=!1,i=0;o.length>i;i++){var a=o[i].split("="),n=a[0],r=a[1];if(e==n)return t=!0,r}return t?void 0:""},fLoadJs:function(e,o,t){var i=$("#"+e);i&&i.remove();var a=document.createElement("script");a.id=e,a.src=o,t&&a.setAttribute("charset",t),document.body.appendChild(a)}},page={init:function(){this.addEvent(),this.selectMailtype()},addEvent:function(){$(document).click(function(){v.hide(),I.hide(),C.hide()}),$("#aboutus").click(function(){return C.hide(),I.show(),!1}),$("#service").click(function(){return I.hide(),C.show(),!1}),$(".u-ico-close").click(function(){return $(this).parent(".m-popup").hide(),!1})},selectMailtype:function(){var e=location.hostname;$("#pagebody").hasClass("p-login-vip163")&&(document.domain="163.com"),$("#pagebody").hasClass("p-login-vip126")?(document.domain="126.com",n={sDomain:"vip.126.com",sFenceDomain:"vip.126.com",sHttpUrl:"http://reg.163.com/logins.jsp",sHttpsUrl:"https://reg.163.com/logins.jsp",sLoginIframeUrl:"http://"+e+"/login_frame.html",sPhoneIframeUrl:"http://"+e+"/login_frame_phone.html",sEnterMailUrl:"http://reg.vip.126.com/enterMail.m?",sProduct:"mailvip"}):$("#pagebody").hasClass("p-login-vip188")&&("188.com"!=e&&(document.domain="188.com"),n={sDomain:"188.com",sFenceDomain:"mail.188.com",sHttpUrl:"http://reg.163.com/logins.jsp",sHttpsUrl:"https://reg.163.com/logins.jsp",sLoginIframeUrl:"http://"+e+"/login_frame.html",sPhoneIframeUrl:"http://"+e+"/login_frame_phone.html",sEnterMailUrl:"http://reg.mail.188.com/servlet/enter?",sProduct:"mail188"})}},page.init(),form={init:function(){this.addEvent(),this.fGetCookieName(),this.fGetLastType()},addEvent:function(){p.focus(function(){$(this).hide(),l.show().focus()}),l.blur(function(){""==l.val()&&($(this).hide(),p.show())}),l.focus(function(){$(".m-popup-warn-username").hide(),$(".m-popup-warn-block").removeClass("m-popup-warn-show")}),h.focus(function(){$(this).hide(),m.show().focus()}),m.blur(function(){""==m.val()&&($(this).hide(),h.show())}),m.focus(function(){$(".m-popup-warn-password").hide(),$(".m-popup-warn-block").removeClass("m-popup-warn-show")}),S.each(function(){$(this).find("input").keypress(function(e){13==e.which&&form.checkForm()})}),w.click(function(){return v.show(),!1}),k.click(function(){form.fSetType($(this)),v.hide()}),d.click(function(){var e=u.val();y.toggleClass("u-ico-ticked"),1==e?(base.fLoadJs("scriptForHttp","http://mimg.127.net/vip/newindex/js/http_login_vip.min.js"),form.fSetSecureMode(-1)):-1==e&&form.fSetSecureMode(1)}),b.click(function(e){form.checkForm(),e.stopPropagation()})},showSingleError:function(e,o){$(".m-popup-warn-show").removeClass("m-popup-warn-show"),o="string"==typeof o?"m-popup-warn-"+o:"";var t='<div class="m-popup m-popup-warn '+o+' m-popup-warn-show"><div class="inner"><div class="tt"><span class="u-ico u-ico-warn"></span>',i='</div></div><div class="arrow"></div></div>',a=t+e+i;$(a).appendTo(".m-loginbox")},fGetCookieName:function(){-1!=document.cookie.indexOf("NETEASE_VIP")?(p.hide(),l.val(base.fGetCookie("NETEASE_VIP")).show()):-1!=document.cookie.indexOf("nets_vip_mobileName")&&(p.hide(),l.val(base.fGetCookie("nets_vip_mobileName")).show())},fGetLastType:function(){var e=base.fGetHash("style");if(""!=e)switch(e){case"6":$(k[1]).trigger("click");break;case"5":$(k[2]).trigger("click");break;default:$(k[0]).trigger("click")}else{var o=base.fGetCookie("logType")||-1,t=base.fGetCookie("language")||-1;7==o?$(k[1]).trigger("click"):5==o?$(k[2]).trigger("click"):1==o&&0==t?$(k[2]).trigger("click"):98==o||23==o?$(k[3]).trigger("click"):3==o?$(k[4]).trigger("click"):99==o||1==o&&1==t?$(k[5]).trigger("click"):$(k[0]).trigger("click")}},fSetType:function(e){var o=e.text(),t=k.index(e);k.css("font-weight","400"),e.css("font-weight","700"),w.find(".vername").text(o),g.val(r[t].type),f.val(r[t].lang)},fGetSecureMode:function(){var e=base.fGetCookie("NTES_VIP_SECURE")||1;-1==e?this.fSetSecureMode(-1):this.fSetSecureMode(1)},fSetSecureMode:function(e){var o;1==e?(y.addClass("u-ico-ticked"),o="您正在使用银行级加密登录，全面保障邮箱安全。"):-1==e&&(y.removeClass("u-ico-ticked"),o="您已取消银行级加密登录，建议使用以加强安全。"),d.attr("title",o),u.val(e)},fSaveSecureMode:function(e){var o=u.val(),t=new Date,i=t.setDate(t.getDate()+(e||14));if(-1==o?document.cookie="NTES_VIP_SECURE="+o+";expires="+new Date(i).toGMTString()+";domain="+n.sDomain:base.fSetCookie("NTES_VIP_SECURE",o,!1),13801248e5>(new Date).getTime()){var a=";domain="+n.sDomain;document.cookie="secure="+a+";expires="+new Date(0).toGMTString()}},checkPhone:function(){/^0?1[3458][0-9]{9}$/.test(l.val())?(x=n.sHttpsUrl+"?product="+n.sProduct+"&type=1&url="+n.sPhoneIframeUrl+"&url2="+n.sPhoneIframeUrl,base.fSetCookie("nets_vip_mobileName",l.val(),!0),base.fSetCookie("logMeth","1",!0),window.gSetting={url1:n.sPhoneIframeUrl,url2:n.sPhoneIframeUrl,sProduct:n.sProduct,sDomain:n.sDomain}):(x=n.sHttpsUrl+"?product="+n.sProduct+"&type=1&url="+n.sLoginIframeUrl+"&url2="+n.sLoginIframeUrl,base.fSetCookie("logMeth","0",!0),window.gSetting={url1:n.sLoginIframeUrl,url2:n.sLoginIframeUrl,sProduct:n.sProduct,sDomain:n.sDomain})},checkForm:function(){return/^[\w\.-]+$/.test(l.val())?""==l.val()?(this.showSingleError("请输入您的VIP邮箱帐号","username"),!1):""==m.val()?(this.showSingleError("请输入您的VIP邮箱密码","password"),!1):(_="98"==g.val()?"23":g.val(),this.fSaveSecureMode(),base.fSetCookie("language",f.val(),!0),base.fSetCookie("logType",g.val(),!0),T="style="+_+"&language="+f.val()+"&enterVip=true&verifycookie=1",this.checkPhone(),c.val(l.val()+"@"+n.sDomain),tt=window.setTimeout('form.showSingleError("当前网速缓慢或服务器繁忙，请您稍后再试。")',15e3),"1"==u.val()?(s.action=x,s.submit(),!1):(fLoginRequest(),void 0)):(this.showSingleError("帐号输入错误，请重新输入","username"),!1)}},form.init(),window.loginSkip={showError:function(e){switch(e){case"460":$(".m-popup-warn-show").removeClass("m-popup-warn-show"),$(".m-popup-warn-block").addClass("m-popup-warn-show"),clearTimeout(tt);break;case"420":form.showSingleError("用户名不存在。","username"),clearTimeout(tt);break;case"412":case"414":case"415":form.showSingleError("您尝试的次数已经太多，请过一段时间再试。","password"),clearTimeout(tt);break;case"416":case"417":case"418":case"419":form.showSingleError("您在短时间内存在频繁登录邮箱的非正常状态。"),clearTimeout(tt);break;case"422":form.showSingleError("您的帐号已被锁定！","username"),clearTimeout(tt);break;case"500":form.showSingleError("未知原因导致登录异常，请稍后再试。"),clearTimeout(tt);break;case"503":form.showSingleError("邮箱系统正在升级维护中，请稍后再试。"),clearTimeout(tt);break;default:}},enterMail:function(e){var o=base.fGetQuery("entry");if("notary"==o){var t="module=outlink.OutlinkModule%7C%7Bmethod%3A%22gotoApp%22%2Ckey%3A%22notary%22%2Ctitle%3A%22%25E5%2585%25AC%25E6%25AD%25A3%25E9%2582%25AE%22%2Curl%3A%22http%3A%2F%2Fnotary.vip.163.com%2Fvipnotaryapp%2Fhtml%2Findex.html%23page%3DmailList%22%2CfullScreen%3Atrue%7D";E=n.sEnterMailUrl+"username="+e+"&"+T+"&"+t,window.location.href=E}else E=n.sEnterMailUrl+"username="+e+"&"+T,window.location.href=E}};var P={init:function(){this.setAttribute(),this.loadText(),window.renderSpreadjs(this.loadBgImg)},setAttribute:function(){this.oSpread=window.spread,this.oSpreadLogin=window.spread.login,this.$bg=$("#bg"),this.$bgText=$("#bgtext"),this.$BgAuthor=$("#bgauthor"),this.$bgWrap=$(".m-loginbg"),this.$loginBox=$(".m-loginbox"),this.$loginBoxBg=$(".m-loginboxbg"),this.$topicList=$(".m-topiclist"),this.isVip163="-1"==location.href.indexOf("163"),this.isVip126="-1"==location.href.indexOf("126"),this.isVip188="-1"==location.href.indexOf("188")},loadText:function(){var e='<li><a href="'+this.oSpread.logintxt.txt1.link+'" target="_blank">·&nbsp;'+this.oSpread.logintxt.txt1.content+"</a></li>",o='<li><a href="'+this.oSpread.logintxt.txt2.link+'" target="_blank">·&nbsp;'+this.oSpread.logintxt.txt2.content+"</a></li>";this.$topicList.html(e+o)},loadBgImg:function(){var e=P,o=base.fGetQuery("entry"),t=new Image;if(o&&e.oSpreadLogin.oEntryMode[o])e.fLoadImg(e.oSpreadLogin.oEntryMode[o].url),t.src=e.oSpreadLogin.oEntryMode[o].url,$(window).resize(function(){e.fResizeImg(t)});else{var i=e.oSpreadLogin.oTimeMode,a=(new Date).getTime(),n=[];for(var r in i){var s=e.oSpreadLogin.oTimeMode[r].oStartTime.getTime(),l=e.oSpreadLogin.oTimeMode[r].oEndTime.getTime(),c=(a-s)/1e3/60,m=(a-l)/1e3/60;c>0&&0>m&&n.push(r)}var p=parseInt(Math.random(0,1)*n.length),r=n[p];if(0==n.length){var h;return e.isVip163&&(h="vip163"),e.isVip126&&(h="vip126"),e.isVip188&&(h="vip188"),M=Math.floor(Math.random()*e.oSpreadLogin.oGalleryMode[h].length+1)-1,e.fLoadImg(e.oSpreadLogin.oGalleryMode[h][M].url),t.src=e.oSpreadLogin.oGalleryMode[h][M].url,$(window).resize(function(){e.fResizeImg(t)}),void 0}var d=i[r].bgSize,u=i[r].bgColor,g=i[r].outLink,f=i[r].statParm,v=i[r].url;if(e.fLoadImg(i[r].url),g&&$(".m-bgwrap").css("cursor","pointer").bind("click",function(){if(f){var e=new Image;e.src="http://jf.vip.163.com/apps/mimg/vip_app.gif?t="+(new Date).getTime()+"&from="+f}window.open(g)}),"960center"==d){var w=v,t=new Image;t.src=w,t.complete||t.width||t.height?e.$bg.attr({src:w,style:"display:block;width:960px;margin:0 auto;"}).hide().fadeIn("slow"):t.onload=function(){e.$bg.attr({src:w,style:"display:block;width:960px;margin:0 auto;"}).hide().fadeIn("slow")},e.$bgWrap.attr({style:"background:"+u+";"})}else e.fLoadImg(v),t.src=v,$(window).resize(function(){e.fResizeImg(t)})}},fLoadImg:function(e){var o=this,t=new Image;if(t.src=e,t.complete||t.width||t.height)o.fResizeImg(t),o.$bg.attr("src",e).hide().fadeIn("slow");else{var i=setInterval(function(){(t.width>0||t.height>0)&&(o.fResizeImg(t),clearInterval(i))},40);t.onload=function(){o.$bg.attr("src",e).hide().fadeIn("slow")}}},fResizeImg:function(e){var o=e.width,t=e.height,i=o/t,a=$(window).width(),n=$(window).height(),r=a/n;if(i>r)this.$bg.height(n).width(""),this.$bg.css("margin-top","0px");else{this.$bg.width(a).height("");var s=a/i,l=s-n;l>0&&this.$bg.css("margin-top","-"+l/2+"px")}}};window.spread&&P.init();var U={lazyLoad:function(){var e=$(".g-scroll").scrollTop(),o=$(window).height(),t=this;$(".J_lazy").each(function(){var t=$(this).offset();if(t.top>e-o&&e+o>t.top){var i=~navigator.userAgent.indexOf("MSIE 6.0")&&$(this).attr("data-srcie6")?$(this).attr("data-srcie6"):$(this).attr("data-src");$(this).attr("src",i).removeClass("J_lazy")}}),$(".J_regNum").hasClass("on")||t.loadRegNum(),e>o?$(".J_top").show():$(".J_top").hide()},listener:function(){var e=this;$(".g-scroll").bind("scroll",function(){e.lazyLoad()}),$(".J_jump").click(function(){var e=1==$(this).attr("data-jump")?$(window).height()+100:0;$(".g-scroll").animate({scrollTop:e},1e3)})},loadRegNum:function(){$.getJSON("http://reg.vip.163.com/statNumbers.m?callback=?",function(e){for(var o=[],t=e.number;t>999;)o.unshift(t%1e3>10?t%1e3>100?t%1e3:"0"+t%1e3:"00"+t%1e3),t=parseInt(t/1e3);return o.unshift(t),$(".J_regNum").html(o.join(",")).addClass("on"),!1})}};U.listener()});