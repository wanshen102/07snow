define("J_ASTotal","j_ASTotal",function(a,b,c){var d={init:function(){this.insertDom(),$("#J_search_box").JumeiSearch("J_search_pop_div"),console.log($("#J_search_box").JumeiSearch),this.bindEvent()},template:'<div id="J_ASTotalContainer_mask" class="J_ASTotalContainer_mask ie6fixedTL"></div><div id="J_ASTotalContainer" class="ie6fixedTL J_ASTotalContainer eric_clearboth"><div class="J_ASTotalContainer_searchBar"><form action="http://search.jumei.com" method="get" pos="top" class="J_ASTotalContainer_searchBox" onsubmit="return mall_search_validate(this)"><input name="filter" type="hidden" value="0-11-1"><input type="text" id="J_search_box" class="J_search_box" default_val="芙优润" autocomplete="off" x-webkit-speech="" x-webkit-grammar="builtin:search" lang="zh" name="search"  /><input name="from" type="hidden"><input name="cat" type="hidden"><button type="submit" class="J_search_submit">搜美妆</button></form><div id="J_search_pop_div"></div></div><p class="J_ASTotalContainer_rightMenu">美妆商品分类</p></div>',insertDom:function(){$("body").append(this.template)},bindEvent:function(){var a=$("#mtsCategory"),b=a.offset().top+a.outerHeight(),c=function(){var a=$(window).scrollTop();a>=b?$(".J_ASTotalContainer_mask,.J_ASTotalContainer").slideDown(400):$(".J_ASTotalContainer_mask,.J_ASTotalContainer").slideUp(400)};$(window).bind("scroll",c)}};window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.J_ASTotalContainer=c.exports={init:function(){d.init()}}}),define("ongoing","ongoing",function(a,b,c){"use strict";function d(a,b,c){this.$ele=a,this.$parent=b,this.$arrow=this.$ele.find(".ctrl_prev,.ctrl_next"),this.$ongoing_hover_png=this.$ele.find(".ongoing_hover_png"),this.$ongoing_rightArea=this.$ele.find(".ongoing_rightArea"),this.$ongoing_leftArea=this.$ele.find(".ongoing_leftArea"),this.$countDown=this.$ele.find(".countDownArea"),this.closeTime=c,this.state=!0}function e(a){function b(a){return a.replace(/(\<img.[^\>]*\>)[\r\n]+(\<a.[^\>]*\>)/g,'$2<div class="ongoing_hover_png"></div>$1')}var c=a.product;if(void 0===c||c.length<2)return console.info(">>正在进行商品小于2，整块隐藏！！"),!1;var d=Math.ceil(c.length/3),e=['<li style="display: none" class="ongoing_product_box clearfix">'];if(d>1&&6>d){e.push('<div class="ongoing_product_slide_control"><span class="curr"></span>');for(var f=1;d>f;f++)e.push("<span></span>");e.push('</div><div class="eric_clearboth"></div>')}if(e.push('<div class="ongoing_leftArea fl"><div class="countDownArea"><div class="countDownBg"></div><div class="countDown"><p></p></div></div>'+b(a.show_style)+'</div><div class="ongoing_rightArea fr"><div class="ctrl_prev"></div><div class="ctrl_next"></div>'),d>0)for(var g,h=1,i=c.length;i>=h;h++)0==(h-1)%3&&e.push("<ul>"),g=c[h-1],g.title="",g.href=(void 0!==g.hash_id?window.RM_CURRENT_SITE_MAIN_WEBBASEURL+"/i/deal/"+g.hash_id:"http://mall.jumei.com/product_"+g.product_id)+".html?from=mall_index_ongoing_"+a.label+"_pos"+h,e.push('<li class="clearfix"><div class="ongoing_right_left fl"><a title="'+g.title+'" href="'+g.href+'" target="_blank" data-pid="'+g.product_id+'"><img src="'+g.img+'" alt="'+g.title+'"></a></div>'),e.push('<div class="ongoing_right_right fl"><p class="ongoing_right_right_title"><a href="'+g.href+'" target="_blank" title="'+g.product_short_name+'" >'+g.product_short_name+"</a></p>"),e.push('<p class="jumei_eric_price"><strong>¥'+g.mall_price+"</strong>&nbsp;&nbsp;"+(j.checkMerketPrice(g.mall_price,g.market_price)?"":"<del>¥"+g.market_price+"</del>")+"</p></div></li>"),0==h%3&&e.push("</ul>");return e.push("</div></li>"),e.join("")}function f(){function a(){function a(a){var b=parseInt(a);return b-=window.RM_SERVER_TIME}for(var b,c=0;c<i[k.pid-1].length;c++)o=a(i[k.pid-1][c].end_time),console.log(i[c]),o>1&&(i[k.pid-1][c].end_time=o,b=$(e(i[k.pid-1][c])),b&&(h=new d(b,l,i[k.pid-1][c].end_time),h.init().show().bindEvent(),m.push(h)));k.pid++,k.pid<=k.totalNum&&g(k.pid)}function b(){c=j.scrollTop(),f=c+j.height();var d=$(".new_admall_ongoing").outerHeight();n=p.offset().top+d-200,f>n&&k.isEnd===!1&&k.pid<=k.totalNum&&(j.unbind("scroll",b),a())}var c,f,h,j=$(window),n=1600,o=0,p=$(".new_admall_ongoing .ongoing_title");j.bind("scroll",b)}function g(a){function b(a){d=a}function c(a){i.push(a),f(),o.initCountDown()}if(k.isEnd!==!0){var d="";getCur_location(b),$.ajax({url:k.jsonUrl+a+"?site="+d,type:"get",dataType:"json",success:function(a){console.log("======",a),k.pid>=k.totalNum||"undefined"==typeof a[0]?k.isEnd=!0:c(a)},error:function(){k.isEnd=!0}})}}function h(){k&&k.pid&&g(k.pid)}var i=[],j=window.Jumei.Mall,k={jsonUrl:"http://mall."+window.RM_SITE_MAIN_TOPLEVELDOMAINNAME+"/ajax/on_",totalNum:6,pid:1,isEnd:!1},l=$(".ongoing_content"),m=[],n=!1;d.prototype={init:function(){if(this.state){this.drawing();var a=this;setTimeout(function(){a.$countDown.animate({top:"306px"},500,"easeOutSine")},500)}return this},fadeIn:function(a){return this.$ele.fadeIn(a),this},show:function(){return this.$ele.show(),this},barSelect:function(a,b){a!=b&&($(this.bars[a]).addClass("curr"),$(this.bars[b]).removeClass("curr"))},arrowDisplay:function(a){this.$arrow[a?"show":"hide"]()},ongoing_hover_pngDisplay:function(a){this.$ongoing_hover_png[a?"show":"hide"]()},bindEvent:function(){var a=this,b=a.bars=a.$ele.find(".ongoing_product_slide_control span"),c=0;return a.$ongoing_leftArea.hover(function(){a.ongoing_hover_pngDisplay(!0)},function(){a.ongoing_hover_pngDisplay(!1)}),b.length&&1!==b.length?(b.mouseenter(function(){a.slideBlockIdx=$(this).index(),a.slideBlockOri=a.slideBlockIdx>c?"right":"left",c=a.slideBlockIdx,a.step()}),a.$ele.find(".ctrl_next").click(function(){a.slideBlockOri="right",a.slideBlockIdx+=1,a.step()}),a.$ele.find(".ctrl_prev").click(function(){a.slideBlockOri="left",a.slideBlockIdx-=1,a.step()}),a.$ongoing_rightArea.hover(function(){a.arrowDisplay(!0)},function(){a.arrowDisplay(!1)})):1===b.length&&a.$ele.find(".ctrl_prev,.ctrl_next").hide(),this},step:function(){function a(a,b){var d=a.length;$.each(a,function(a,e){e.animate({left:b},500+60*a,"swing",function(){a==d-1&&(c.state-=1)})})}function b(a,b,d){var e=a.length;$.each(a,function(a,f){f.css({left:b}).animate({left:d},500+60*a,"swing",function(){a==e-1&&(c.state-=1)})})}var c=this;if(this.slideBlockIdx!=this.slideBlockPreIdx&&1==c.state){this.slideBlockIdx>=this.slideBlockCount?this.slideBlockIdx=0:this.slideBlockIdx<0&&(this.slideBlockIdx=this.slideBlockCount-1),c.state=3;var d="-251px",e="307px",f="28px";"right"==this.slideBlockOri?(a(this.slideAry[this.slideBlockPreIdx].childs,d),b(this.slideAry[this.slideBlockIdx].childs,e,f)):(a(this.slideAry[this.slideBlockPreIdx].childs,e),b(this.slideAry[this.slideBlockIdx].childs,d,f)),c.barSelect(c.slideBlockIdx,this.slideBlockPreIdx),this.slideBlockPreIdx=this.slideBlockIdx}},drawing:function(){var a=this;this.$parent.append(this.$ele),this.slideBlock=this.$ele.find(".ongoing_rightArea ul"),this.slideBlockCount=this.slideBlock.length,this.slideBlockIdx=0,this.slideBlockPreIdx=0,this.slideBlockOri="left",a.state=1,a.slideAry=[];var b,c;return this.slideBlock.each(function(d,e){b=$(e),b.childs=[],$(e).find("li").each(function(a,e){c=$(e),b.childs.push(c),c.css({position:"absolute",left:251*d+28+"px",top:80*a+23*(a+1)+"px"})}),a.slideAry.push(b)}),this},drawTime:function(a){this.$countDown.find(".countDown p").html(a)},destroy:function(){this.$ele.remove()}};var o={initCountDown:function(){function a(){for(var a,c=m.length;c-->0;)(a=m[c])&&a.closeTime>=0&&a.drawTime(b.countTime(a.closeTime--))}var b=this;n!==!1&&clearInterval(n),n=setInterval(a,1e3)},countTime:function(a){var b,c,d,e,f;return c=1e3*a,c>0?(b=parseInt(c/864e5),b=b>9?b:"0"+b,c%=864e5,d=parseInt(c/36e5),d=d>9?d:"0"+d,c%=36e5,e=parseInt(c/6e4),e=e>9?e:"0"+e,c=parseInt(c%6e4/1e3),c=c>9?c:"0"+c,f="&nbsp;剩余&nbsp; <span>"+b+"</span>天<span>"+d+"</span>时<span>"+e+"</span>分<span>"+c+"</span>秒"):f="活动已经结束",f}};window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.Mall.Ongoing=c.exports={init:h}}),define("category","category",function(a,b,c){"use strict";function d(){var a=$(".fenleizhuangti_content_item"),b=$(".fenleizhuangti_title"),c=$(".fenleizhuangti_tabArrow_content"),d=$(".eric_center_left,.eric_center_center,.eric_center_right_0,.eric_center_right_1");h.recordData.num=a.length;var e=g.titleTotalWidth/h.recordData.num;h.changeWidth(b,e),h.recordData.navBarEachWidth=e;var f={navBar:b,content:a,hoverElems:d,categoryList_navBar_arrow:c};return f}function e(){var a=d();h.hoverEffect(a.hoverElems),h.navBarSwitch(a),$(a.navBar[0]).css("color","#ED145B")}function f(){e()}var g={titleTotalWidth:750},h={recordData:{index:0,navBarEachWidth:0,duringTime:200,throttleTime:!0},navBarSwitch:function(a){var b=this;$.each(a.navBar,function(c,d){$(d).hover(function(){return c===b.recordData.index||b.recordData.throttleTime===!1?!1:(b.recordData.index=c,b.recordData.throttleTime=!1,a.categoryList_navBar_arrow.animate({left:c*b.recordData.navBarEachWidth+"px"},"50"),$.each(a.content,function(a,c){a===b.recordData.index?$(c).css("display","block"):$(c).css("display","none")}),$.each(a.navBar,function(a,c){a===b.recordData.index?$(c).css("color","#ED145B"):$(c).css("color","#000")}),setTimeout(function(){b.recordData.throttleTime=!0},b.recordData.duringTime),void 0)},function(){})})},hoverEffect:function(a){a.hover(function(){$(this).addClass("boxShadow")},function(){$(this).removeClass("boxShadow")})},changeWidth:function(a,b){try{a.css("width",b)}catch(c){}}};window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.Mall.Category=c.exports={init:f}}),define("tuijianAd",function(a,b,c){"use strict";function d(a,b,c,d){$(b).mouseenter(function(){f[a]===!1&&(f[a]=!0,$(b).animate({left:"-"+c+"px"},d,function(){$(b).animate({left:c+"px"},d,function(){$(b).animate({left:"0px"},d,function(){f[a]=!1})})}))})}function e(){var a=6,b=200;$(".tuijianAd,.left_tuijianAd,.eric_small_product_img").each(function(c,e){f.push(!1),d(c,e,a,b)})}var f=[];window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.Mall.TuijianAd=c.exports={init:e}}),define("brandWall",function(a,b,c){"use strict";function d(a){function b(a,b){$.isFunction(a)&&(b=a,a=p);for(var c=1,d=0,e=0;a>=c;c++)b(c,d,e,a),0==c%q?(e++,d=0):d++}function c(a,c,d,e,f){var g,h,i="easeInOutCubic";b(e.length,function(a){e[a-1]?a==e.length?$(c[12]).html(e[a-1].show_style).css({display:"block"}):$(c[a-1]).html(e[a-1].show_style).css({display:"block"}):$(c[a-1]).css({display:"none"})}),b(13,function(b,c,e,f){"left"==d?(g=t+n+l+"px",h=b==f?800:800+50*(q-c)+50*e):(g="-"+(n+l)+"px",h=b==f?800+(50*q+50):800+50*c+50*e),$(a[b-1]).animate({left:g},h,"easeInOutCubic")}),setTimeout(function(){b(13,function(a,b,e,j){var k;"left"==d?(k="-"+(n+l)+"px",a==j?(g="660px",h=950):(g=b*(l+o)+"px",h=900+50*(q-b)+50*e)):(k=t+n+l+"px",a==j?(g="660px",h=800+110*q):(g=b*(l+o)+"px",h=900+50*b+50*e)),$(c[a-1]).css({left:k}).animate({left:g},h,i,function(){a==j&&f&&f()})})},130)}function d(a,c,d){b(c.length,function(b){c[b-1]?b==c.length?$(a[12]).html(c[b-1].show_style).css({display:"block"}):$(a[b-1]).html(c[b-1].show_style).css({display:"block"}):$(a[b-1]).css({display:"none"})}),d()}function e(a,b,d){r?(r=!1,f(a,function(a){var e;a.length>0?c(k,s,b,a,function(){e=k,k=s,s=e,r=!0,d&&(u=null),u&&j.pop.apply(j,u)}):r=!0})):u=[a,b,"true"]}function g(a){r&&(r=!1,f(a,function(a){a.length>0&&d(k,a,function(){r=!0})}))}var h,i=$(".ppq_leftArea ul"),k=$(".ppq_leftArea ul li"),l=163,m=100,n=202,o=2,p=13,q=4,r=!0,s=[],t=q*l+4*o;j.isMouseEnter=!1;var u=null;"effect"==a&&b(function(a,b,c,d){var e="<li ";e+=a==d?'class="rtop" style="left:'+(t+n)+'px;top:0px;">':'<li style="left:'+(t+n)+"px;top:"+c*(m+o)+'px;">',e+='<a title="###" href="#"><img src="#" alt="#"></a></li>',h=$(e),i.append(h),s.push(h)}),"effect"==a?($(".pingpaiqiang_content").css({overflow:"hidden"}),j.pop=e):($(".pingpaiqiang_content").css({overflow:"visible"}),j.pop=g)}function e(){function a(){i&&i.stop(),i=h.animate({left:g*f},100,"easeOutCirc",function(){j.pop(f,c)})}function b(a,b){a!=b&&($(d[a]).addClass("titleSelected"),$(d[b]).removeClass("titleSelected"))}var c,d=$(".pingpaiqiang_head h3"),e=d.length,f=0,g=$(d[0]).width(),h=$(".pingpaiqiang_tabArrow_content"),i=null,k=["left","right"],l=0;d.mouseenter(function(){f=$(this).index(),c=f>l?"right":"left",b(f,l),l=f,a()}),$(".ppq_rightArea_bottom div").click(function(){var d=k[$(this).index()];"left"==d&&f>=0?f--:"right"==d&&e>f&&f++,0>f?f=e-1:f>=e&&(f=0),b(f,l),c=d,l=f,a()}),b(0,1)}function f(a,b){var c=i[a];void 0===c?console.warn(">>>aboute brand not data,data=",c):b(c)}function g(){var a,b,c,d,e,f;$(".pingpaiqiang_head h3").each(function(g,h){a=$(h),b=a.attr("data-small"),c=a.attr("data-big"),d=window[b],e=window[c],f=[],d&&d.length?f=f.concat(d):console.warn(">>>aboute brand error data info >>",b+"="+d),e&&e.length?f=f.concat(e):console.warn(">>>aboute brand error data info >>",c+"="+e),i.push(f)});try{window.Jumei.Mall.isDebuger||setTimeout(function(){try{$.browser.msie?document.getElementById("script_brand_wall_data").removeNode(!0):document.getElementById("script_brand_wall_data").remove()}catch(a){}},1e3)}catch(g){}}function h(){g(),d("normal"),e()}var i=[],j={};window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.Mall.BrandWall=c.exports={init:h}}),define("banner",function(a,b,c){"use strict";function d(a,b){this.$elem=$(a),this.$bar=$(b);var c=this.$elem.attr("lazyload");this.$elem.find(".banner_main_con a").html('<img src="'+c+'">')}function e(){var a=[],b=$(".new_admall_adBanner .new_admall_content li"),c=$("#new_mall_bottom_bar li");return $(b[0]).find("img").width(),b.each(function(b,e){a.push(new d(e,c[b]))}),a[0].changeBarColor(!0),a.currentSelectedBar=a[0],a._$elem=$(".new_admall_adBanner .new_admall_content"),a.Imgs=b,i.arrows=[{$elem:$("#new_mall_prev"),orientation:"left"},{$elem:$("#new_mall_next"),orientation:"right"}],i.navBar=$("#new_mall_bottom_bar"),$.extend(a,i)}function f(){var a=$(".new_admall_adBanner .new_admall_content li");if(!(a.length<=0)){var b=e();b[0].$elem.fadeIn(300),setTimeout(function(){b.navBarDisplay(!0),b.play(),b.bindArrowClick(),b.bindNavBarHover();var a=b._$elem.parent();a.hover(function(){b.navArrowDisplay(!0)},function(){b.navArrowDisplay(!1)})},3e3)}}function g(){h=$.browser.mozilla||$.browser.msie?!1:!0,f()}d.prototype={changeBarColor:function(a){a?this.$bar.addClass("selected"):this.$bar.removeClass("selected")},fadeOut:function(){this.$elem.fadeOut()},fadeIn:function(){this.$elem.fadeIn()}};var h,i={play:function(a){function b(){f.mark(),j++,j>i&&(j=0),d()}function c(){e||f.isPlay||(l=setTimeout(b,g))}function d(){var a=f[j],b=f[k],d=j;f.isPlay=!0,f.navBarSwitch(d),b.$elem.css({display:"none"}),a.$elem.css({display:"block",left:"0px"}),h?(b.$elem.removeClass("current_translation").unbind("transitionend"),clearTimeout(m),m=setTimeout(function(){a.$elem.addClass("current_translation").bind("transitionend",function(){f.isPlay=!1,c()})},10)):(b.$elem.stop(),a.$elem.stop().animate({left:"-20px"},4e3,function(){f.isPlay=!1,c()}))}var e,f=this,g=(a&&a.duration||700,a&&a.delay||1500),i=f.length-1,j=0,k=1,l=-1,m=-1;f.mark=function(){k=j},f.setDirection=function(a){f.mark(),"left"===a?j--:j++,0>j?j=i:j>i&&(j=0),d()},f.setIndex=function(a){f.mark(),j=a,d()},f.handTouch=function(a){e=a,a?clearTimeout(l):c()},d()},navBarSwitch:function(a){this.currentSelectedBar&&this.currentSelectedBar.changeBarColor(!1);var b=this[a];b.changeBarColor(!0),this.currentSelectedBar=b},navArrowDisplay:function(a){this.arrows&&$.each(this.arrows,function(){this.$elem[a?"show":"hide"]()})},bindArrowClick:function(){var a=this;$.each(this.arrows,function(b,c){!function(b){b.$elem.click(function(){a.setDirection(b.orientation)})}(c)})},navBarDisplay:function(a){this.navBar&&this.navBar[a?"show":"hide"]()},bindNavBarHover:function(){var a=this;$.each(this,function(b,c){c.$bar.mouseenter(function(){a.setIndex(b)})})}};window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.Mall.Banner=c.exports={init:g}}),define("sideNav",function(){"use strict";function a(){$("#admall_search_input").JumeiSearch("admall_search_pop_div"),b.init()}var b={init:function(){function a(a){var b=$(a),c=b.index(),d=$(f[c]);b.addClass("hover"),d.show();var h=g.height()+c*b.outerHeight()-10;e.css({display:"block",top:h,left:b.outerWidth()-2})}function b(a){var b=$(a),c=$(f[b.index()]);b.removeClass("hover"),c.hide(),e.hide(),b=null}function c(a,b){i?h=b:b()}var d=$(".new_admall_menu_content"),e=$(".subCategory"),f=e.children(),g=$(".new_admall_eric_menu");d.menuAim({activate:a,deactivate:b,exit:c}),$.each(f,function(a,b){var c=$(b).children();c.length<3&&$(b).append(c[0].value)});var h,i=!1;e.mouseenter(function(){i=!0}).mouseleave(function(){i=!1,h&&h()})}};return window.Jumei.Mall=window.Jumei.Mall||{},window.Jumei.Mall.SideNav={init:a},{init:a}}),define("main",["sideNav","banner","brandWall","tuijianAd","category","ongoing","J_ASTotal"],function(a){"use strict";var b={init:function(){this.baseURL=window.RM_SITE_MAIN_WEBBASEURL||"",this.isDebuger=!1,this.createLog(),"Mall"===RM_CONTROL&&"show"==RM_ACTION&&(a("sideNav").init(),a("banner").init(),a("brandWall").init(),a("tuijianAd").init(),a("category").init(),a("ongoing").init(),a("J_ASTotal").init()),this.initIbar()},initIbar:function(){Jumei.app&&Jumei.app.iBar&&new Jumei.app.iBar,$.browser.msie&&7===parseInt($.browser.version,10)&&$("body").css("height","")},checkMerketPrice:function(a,b){var c;return c=a/b>=.95?!0:!1},createLog:function(){var a=this;window.console=window.console||{},$.each(["debug","error","warn","info","log"],function(b,c){window.console[c]&&0!=a.isDebuger||(window.console[c]=function(){})})},css3Supports:function(){var a=document.createElement("div"),b="Khtml O Moz Webkit".split(" "),c=b.length;return function(d){if(d=d||"transition",d in a.style)return!0;if("-ms-"+d in a.style)return!0;for(d=d.replace(/^[a-z]/,function(a){return a.toUpperCase()});c--;)if(b[c]+d in a.style)return!0;return!1}}()};return window.Jumei=window.Jumei||{},window.Jumei.Mall=b,b});